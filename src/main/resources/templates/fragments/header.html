<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<body>
    <header th:fragment="header" class="header">
        <nav class="navbar">
            <a href="/" class="navbar-brand">시나코딩</a>
            <ul class="navbar-nav">
                <li class="nav-item"><a href="/courses" class="nav-link">강의 목록</a></li>

                <!-- 인증되지 않은 사용자에게만 보임 -->
                <th:block sec:authorize="!isAuthenticated()">
                    <li class="nav-item"><a href="/login" class="nav-link">로그인</a></li>
                    <li class="nav-item"><a href="/signup" class="nav-link">회원가입</a></li>
                </th:block>

                <!-- 인증된 사용자에게만 보임 -->
                <th:block sec:authorize="isAuthenticated()">
                    <!-- 알림 아이콘 -->
                    <li class="nav-item notification-icon">
                        <a href="/notifications" class="nav-link">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor"
                                class="bi bi-bell-fill" viewBox="0 0 16 16">
                                <path
                                    d="M8 16a2 2 0 0 0 2-2H6a2 2 0 0 0 2 2m.995-14.901a1 1 0 1 0-1.99 0A5 5 0 0 0 3 6c0 1.098-.5 6-2 7h14c-1.5-1-2-5.902-2-7 0-2.42-1.72-4.44-4.005-4.901" />
                            </svg>
                            <!-- JS에서 쉽게 식별할 수 있도록 id='notification-badge' 추가 -->
                            <!-- 초기 렌더링 시 unreadNotificationCount가 0이면 보이지 않도록 style 속성 추가 -->
                            <span class="notification-badge" id="notification-badge"
                                th:text="${unreadNotificationCount > 0 ? unreadNotificationCount : ''}"
                                th:style="${unreadNotificationCount > 0 ? '' : 'display: none;'}"></span>
                        </a>
                    </li>

                    <li class="nav-item" sec:authorize="hasAnyRole('SUPER_ADMIN', 'CONTENT_MANAGER')">
                        <a href="/admin/dashboard" class="nav-link">관리자 페이지</a>
                    </li>

                    <li class="nav-item" sec:authorize="hasRole('STUDENT')">
                        <a href="/my-courses" class="nav-link">내 강의실</a>
                    </li>

                    <li class="nav-item" sec:authorize="hasRole('PARENT')">
                        <a href="/my-profile/children" class="nav-link">자녀 학습관리</a>
                    </li>

                    <li class="nav-item"><a href="/my-info" class="nav-link">내 정보</a></li>
                    <li class="nav-item">
                        <a href="javascript:void(0);" onclick="logout()" class="nav-link">로그아웃</a>
                    </li>
                </th:block>
            </ul>
        </nav>
    </header>
</body>

</html>